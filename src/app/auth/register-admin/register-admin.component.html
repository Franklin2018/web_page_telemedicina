<section id="wrapper">
    <div class="login-register " style=" overflow: auto; background-image:url(../assets/images/background/login-register.jpg);">
        <div class="fixed-position login-box card">
            <div class="card-body">
                <h3 class="box-title m-b-20">Registrate </h3> <small>Crea tu cuenta y unete</small>
                <mat-horizontal-stepper [linear]=isLinear #stepper>
                    <mat-step [stepControl]="registerFormUsuario" #step>
                        <ng-template matStepLabel>Perfil de usuario</ng-template>
                        <form id="loginform" autocomplete="off" [formGroup]="registerFormUsuario" class="form-horizontal form-material">
                            <div class="row">
                                <mat-form-field class="col-md-6">
                                    <mat-label>Nombres</mat-label>
                                    <input matInput placeholder="Nombre (s)" formControlName="nombre" required>
                                </mat-form-field>
                                <mat-form-field class="col-md-6">
                                    <mat-label>Email</mat-label>
                                    <input matInput placeholder="" formControlName="email" required>
                                </mat-form-field>
                                <mat-form-field class="col-md-6">
                                    <mat-label>Password</mat-label>
                                    <input matInput type="password" placeholder="Password" formControlName="password" required>
                                </mat-form-field>
                                <mat-form-field class="col-md-6">
                                    <mat-label>Password</mat-label>
                                    <input matInput type="password" placeholder="Confirmar Password" formControlName="password2" required>
                                </mat-form-field>
                                <mat-form-field class="col-md-6">
                                    <mat-label>Rol</mat-label>
                                    <mat-select formControlName="role">
                                        <mat-option *ngFor="let role of roles" [value]="role.value">
                                            {{role.value}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>



                            </div>
                            <div class="row ">
                                <div class="col text-danger ">

                                    <p *ngIf="campoNoValido( registerFormUsuario,'nombre') ">* El nombre es obligatorio</p>
                                    <p *ngIf="campoNoValido( registerFormUsuario,'email') ">* El email es obligatorio y tiene que ser válido</p>
                                    <p *ngIf="contrasenasNoValidas() ">* Las contraseñas deben de ser iguales</p>
                                    <p *ngIf="campoNoValido( registerFormUsuario,'role') ">* El role es obligatorio</p>

                                </div>
                            </div>
                            <div class="d-flex flex-row-reverse ">
                                <button class="btn btn-color btn-primary" mat-button matStepperNext (click)="test(step.hasError) ">Siguiente</button>
                            </div>
                        </form>
                    </mat-step>
                    <mat-step [stepControl]="registerFormPersona " #step2>
                        <ng-template matStepLabel>Datos Personales</ng-template>
                        <form id="loginform " autocomplete="off " [formGroup]="registerFormPersona " class="form-horizontal form-material ">
                            <div class="row ">
                                <mat-form-field class="col-md-6 ">
                                    <mat-label>Nombres</mat-label>
                                    <input matInput placeholder="Nombre (s) " formControlName="nombre" required>
                                </mat-form-field>
                                <mat-form-field class="col-md-6 ">
                                    <mat-label>Apellidos</mat-label>
                                    <input matInput placeholder="Apellidos (s)" formControlName="apellido" required>
                                </mat-form-field>
                                <mat-form-field class="col-md-6 ">
                                    <mat-label>Documento Identidad</mat-label>
                                    <input matInput placeholder="Cedula de identificacion " formControlName="carnetIdentidad" required>
                                </mat-form-field>
                                <mat-form-field class="col-md-6 ">
                                    <mat-label>Celular</mat-label>
                                    <input matInput placeholder="Celular " formControlName="celular" required>
                                </mat-form-field>

                                <mat-form-field class="col-md-6">
                                    <mat-label>Fecha de Nacimiento</mat-label>
                                    <input matInput [matDatepicker]="picker" formControlName="fechaNacimiento" required>
                                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                    <mat-datepicker #picker></mat-datepicker>
                                </mat-form-field>
                                <mat-form-field class="col-md-6 ">
                                    <mat-label>Direccion</mat-label>
                                    <input matInput placeholder="Direccion" formControlName="direccion">
                                </mat-form-field>
                                <mat-form-field class="col-md-6">
                                    <mat-label>Genero</mat-label>
                                    <mat-select formControlName="genero">
                                        <mat-option *ngFor="let genero of generos" [value]="genero.value">
                                            {{genero.value}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>

                            </div>
                            <div class="row ">
                                <div class="col text-danger ">

                                    <p *ngIf="campoNoValido( registerFormPersona,'nombre') ">* El nombre es obligatorio</p>
                                    <p *ngIf="campoNoValido(registerFormPersona ,'apellido') ">* El apellido es obligatorio</p>
                                    <p *ngIf="campoNoValido( registerFormPersona,'fechaNacimiento') ">* La fecha de nacimiento es obligatorio</p>
                                    <p *ngIf="campoNoValido( registerFormPersona,'genero') ">* La genero es obligatorio</p>
                                </div>
                            </div>
                            <div class="d-flex flex-row-reverse ">
                                <button class="btn btn-color btn-primary" mat-button matStepperNext (click)="crearUsuario(step2.hasError) ">Registrar</button>
                                <button class="btn btn-light" mat-button matStepperPrevious>Anterior</button>
                            </div>
                        </form>
                    </mat-step>

                </mat-horizontal-stepper>
            </div>
        </div>
    </div>
</section>